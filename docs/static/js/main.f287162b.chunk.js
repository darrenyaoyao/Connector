(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){e.exports=n(263)},110:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(16),i=n.n(r),d=n(33),s=n(32),u=n(15),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NODE":if("STATE"===t.nodeType)var n="#e91e63",o=t.nodeName,a="state";else"FUNCTION"===t.nodeType?(n="#03a9f4",o=t.nodeName,a="function"):"RESPONSE"===t.nodeType&&(n="#8bc34a",o=t.nodeName,a="response");var r={group_x:50,group_y:50,node_x:0,node_y:0,width:200,height:100,cornerRadius:20,fill:n,name:o,name_x:20,name_y:15,name_fill:"white",fontSize:20,type:a,inEdges:[],outEdges:[]};return Object(u.a)(e).concat([r]);case"CHANGE_NODE_POSITION":return(i=Object(u.a)(e))[t.index].group_x=t.position.x,i[t.index].group_y=t.position.y,i;case"ADD_OUTPUT_EDGE_TO_NODE":return(i=Object(u.a)(e))[t.nodeIndex].outEdges.push(t.edgeIndex),i;case"ADD_INPUT_EDGE_TO_NODE":var i;return(i=Object(u.a)(e))[t.nodeIndex].inEdges.push(t.edgeIndex),i;case"DEMO1_NODES":return JSON.parse('[{"group_x":138,"group_y":278,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#e91e63","name":"start","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"state","inEdges":[],"outEdges":[0]},{"group_x":559,"group_y":276,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#e91e63","name":"user want to listen songs","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"state","inEdges":[0],"outEdges":[1,2]},{"group_x":877,"group_y":92,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#8bc34a","name":"Which song do you want?","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"response","inEdges":[1],"outEdges":[]},{"group_x":1152,"group_y":274,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#e91e63","name":"search songs","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"state","inEdges":[2],"outEdges":[3]},{"group_x":1423,"group_y":269,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#03a9f4","name":"search songs in database","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"function","inEdges":[3],"outEdges":[4,5]},{"group_x":1727,"group_y":61,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#e91e63","name":"play the song","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"state","inEdges":[4],"outEdges":[]},{"group_x":1739,"group_y":466,"node_x":0,"node_y":0,"width":200,"height":100,"cornerRadius":20,"fill":"#e91e63","name":"ask again","name_x":20,"name_y":15,"name_fill":"white","fontSize":20,"type":"state","inEdges":[5],"outEdges":[]}]');default:return e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EDGE":var n="black",o="new intent";"INTENT"===t.edgeType?(n="black",o=t.edgeName):"FUNCOUTPUT"===t.edgeType&&(n="#E0E0E0",o=t.edgeName);var a={points:t.points,name:o,fontSize:20,stroke:n,strokeWidth:5,type:t.edgeType,inNode:-1,outNode:-1};return Object(u.a)(e).concat([a]);case"SET_EDGE_IN_NODE":return(r=Object(u.a)(e))[t.edgeIndex].inNode=t.nodeIndex,r;case"SET_EDGE_OUT_NODE":return(r=Object(u.a)(e))[t.edgeIndex].outNode=t.nodeIndex,r;case"ADD_EDGE_POINTS":return(r=Object(u.a)(e))[t.index].points.push(t.points[0]),r[t.index].points.push(t.points[1]),r;case"CHANGE_EDGE_START_POINTS":return(r=Object(u.a)(e))[t.index].points[0]=t.points[0],r[t.index].points[1]=t.points[1],r;case"CHANGE_EDGE_END_POINTS":var r,i=(r=Object(u.a)(e))[t.index].points.length;return r[t.index].points[i-2]=t.points[0],r[t.index].points[i-1]=t.points[1],r;case"DEMO1_EDGES":return JSON.parse('[{"points":[238,328,559,326],"name":"I want to listen songs","fontSize":20,"stroke":"black","strokeWidth":5,"type":"INTENT","inNode":0,"outNode":1},{"points":[659,326,877,142],"name":"","fontSize":20,"stroke":"#E0E0E0","strokeWidth":5,"type":"FUNCOUTPUT","inNode":1,"outNode":2},{"points":[659,326,1152,324],"name":"I want to listen the song: Perfect","fontSize":20,"stroke":"black","strokeWidth":5,"type":"INTENT","inNode":1,"outNode":3},{"points":[1252,324,1423,319],"name":"","fontSize":20,"stroke":"#E0E0E0","strokeWidth":5,"type":"FUNCOUTPUT","inNode":3,"outNode":4},{"points":[1523,319,1727,111],"name":"yes","fontSize":20,"stroke":"#E0E0E0","strokeWidth":5,"type":"FUNCOUTPUT","inNode":4,"outNode":5},{"points":[1523,319,1739,516],"name":"no","fontSize":20,"stroke":"#E0E0E0","strokeWidth":5,"type":"FUNCOUTPUT","inNode":4,"outNode":6}]');default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_EDGE_INDEX":return t.index;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CREATE_EDGE_MODE":return t.mode;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new name",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CREATE_EDGE_NAME":return t.name;default:return e}},g=Object(s.b)({dialogueNodes:c,dialogueEdges:l,currentEdgeIndex:p,createEdgeMode:E,createEdgeName:h}),f=(n(110),function(e){return{type:"SET_CREATE_EDGE_MODE",mode:e}}),m=n(93),y=n(21),O=n(22),_=n(24),N=n(23),v=n(25),b=n(7),x=n(18),T=n(61),D=n.n(T),S=n(94),C=n.n(S),k=n(95),j=n.n(k),w=n(96),I=n.n(w),M=n(97),P=n.n(M),U=n(100),G=n.n(U),A=n(98),R=n.n(A),z=n(99),F=n.n(z),W=n(19),L=n.n(W),V=n(62),H=n.n(V),J=n(101);var X=Object(x.createMuiTheme)({palette:{primary:D.a}}),B=Object(x.createMuiTheme)({palette:{primary:C.a}}),Y=Object(x.createMuiTheme)({palette:{primary:j.a}}),$=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(_.a)(this,Object(N.a)(t).call(this,e))).handleClickDialogOpen=function(){n.setState({open:!0,name:"new name"})},n.handleDialogClose=function(e){n.setState({open:!1}),"CONFIRM"===e&&("NODE"===n.state.createPayload.mode?(n.props.addNode(n.state.createPayload.type,n.state.name),n.props.setCreateEdgeMode("default")):"EDGE"===n.state.createPayload.mode&&(n.props.setCreateEdgeMode(n.state.createPayload.type),n.props.setCreateEdgeName(n.state.name)))},n.handleTextFieldChange=function(e){return function(t){n.setState(Object(m.a)({},e,t.target.value))}},n.state={open:!1,createPayload:{mode:"NODE",type:"STATE"},title:"STATE",name:"new name",intentSelected:!1,funcOutputSelected:!1},n.createNode=n.createNode.bind(Object(b.a)(Object(b.a)(n))),n.changeCreateEdgeMode=n.changeCreateEdgeMode.bind(Object(b.a)(Object(b.a)(n))),n.handleClickDialogOpen=n.handleClickDialogOpen.bind(Object(b.a)(Object(b.a)(n))),n.handleDialogClose=n.handleDialogClose.bind(Object(b.a)(Object(b.a)(n))),n.intentSelectedValue=n.intentSelectedValue.bind(Object(b.a)(Object(b.a)(n))),n.funcOutputSelectedValue=n.funcOutputSelectedValue.bind(Object(b.a)(Object(b.a)(n))),n.generateOutput=n.generateOutput.bind(Object(b.a)(Object(b.a)(n))),n.demo1=n.demo1.bind(Object(b.a)(Object(b.a)(n))),n}return Object(v.a)(t,e),Object(O.a)(t,[{key:"intentSelectedValue",value:function(){return"INTENT"===this.props.createEdgeMode}},{key:"funcOutputSelectedValue",value:function(){return"FUNCOUTPUT"===this.props.createEdgeMode}},{key:"createNode",value:function(e){this.setState({createPayload:{mode:"NODE",type:e},title:e}),this.handleClickDialogOpen()}},{key:"changeCreateEdgeMode",value:function(e){"default"!==this.props.createEdgeMode?this.props.setCreateEdgeMode("default"):(this.setState({createPayload:{mode:"EDGE",type:e},title:e}),this.handleClickDialogOpen())}},{key:"generateOutput",value:function(){console.log(JSON.stringify(this.props.dialogueNodes)),console.log(JSON.stringify(this.props.dialogueEdges)),function(e,t){var n=new Blob([e],{type:"text/plain"}),o=document.createElement("a");o.download=t,null!=window.webkitURL?o.href=window.webkitURL.createObjectURL(n):(o.href=window.URL.createObjectURL(n),o.onclick=function(e){e=e||window.event,document.body.removeChild(e.target)},o.style.display="none",document.body.appendChild(o)),o.click()}(function(e,t,n){function o(n,a,r){a+="\t"+n.name;var i=!0,d=!0,s=!1,u=void 0;try{for(var c,l=n.outEdges[Symbol.iterator]();!(d=(c=l.next()).done);d=!0){var p=c.value,E=t[p];if("INTENT"!=E.type&&r.visitedEdges.indexOf(p)<0){r.visitedEdges.push(p);var h=i?a:a.replace(/[^\t]+/g,"");i=!1,E.name.length>0&&(h+="\t"+E.name),o(e[E.outNode],h,r)}}}catch(g){s=!0,u=g}finally{try{d||null==l.return||l.return()}finally{if(s)throw u}}i&&(r.text+=a+"\n")}var a=new Map,r=!0,i=!1,d=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)"INTENT"==(D=s.value).type&&(a.has(D.name)||a.set(D.name,[]),a.get(D.name).push(D))}catch(C){i=!0,d=C}finally{try{r||null==u.return||u.return()}finally{if(i)throw d}}var c={text:(n=n||"begin_scene")+"\n",visitedEdges:[]},l=!0,p=!1,E=void 0;try{for(var h,g=a[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){var f=h.value,m=Object(J.a)(f,2),y=m[0],O=m[1],_=!0,N=!0,v=!1,b=void 0;try{for(var x,T=O[Symbol.iterator]();!(N=(x=T.next()).done);N=!0){var D=x.value,S="\t"+(_?y:"");_=!1,S+="\t"+e[D.inNode].name,o(e[D.outNode],S,c)}}catch(C){v=!0,b=C}finally{try{N||null==T.return||T.return()}finally{if(v)throw b}}c.text+="\n"}}catch(C){p=!0,E=C}finally{try{l||null==g.return||g.return()}finally{if(p)throw E}}return c.text+="end_of_scene\n",c.text}(this.props.dialogueNodes,this.props.dialogueEdges),"dialogue.config")}},{key:"demo1",value:function(){this.props.demo1Edges(),this.props.demo1Nodes()}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",{className:t.header},a.a.createElement(x.MuiThemeProvider,{theme:X},a.a.createElement(L.a,{color:"primary",variant:"contained",className:t.button,onClick:function(){return e.createNode("STATE")}},"create state")),a.a.createElement(x.MuiThemeProvider,{theme:B},a.a.createElement(L.a,{color:"primary",variant:"contained",className:t.button,onClick:function(){return e.createNode("FUNCTION")}},"create function")),a.a.createElement(x.MuiThemeProvider,{theme:Y},a.a.createElement(L.a,{color:"primary",variant:"contained",className:t.button,onClick:function(){return e.createNode("RESPONSE")}},"create response")),a.a.createElement(H.a,{className:t.button,value:0,selected:this.intentSelectedValue(),onClick:function(){return e.changeCreateEdgeMode("INTENT")}},"create intent line"),a.a.createElement(H.a,{className:t.button,value:0,selected:this.funcOutputSelectedValue(),onClick:function(){return e.changeCreateEdgeMode("FUNCOUTPUT")}},"create function output line"),a.a.createElement(L.a,{color:"default",variant:"contained",className:t.button,onClick:this.generateOutput},"get output"),a.a.createElement(L.a,{color:"default",variant:"contained",className:t.button,onClick:this.demo1},"Demo1"),a.a.createElement(I.a,{open:this.state.open,onClose:this.handleDialogClose},a.a.createElement(P.a,null,"Set your "+this.state.title+" name"),a.a.createElement(R.a,null,a.a.createElement(F.a,{label:"Name",className:t.textField,value:this.state.name,onChange:this.handleTextFieldChange("name"),margin:"normal"})),a.a.createElement(G.a,null,a.a.createElement(L.a,{onClick:function(){return e.handleDialogClose("CANCEL")},color:"primary"},"Cancel"),a.a.createElement(L.a,{onClick:function(){return e.handleDialogClose("CONFIRM")},color:"primary",autoFocus:!0},"Confirm"))))}}]),t}(o.Component),q=Object(x.withStyles)(function(e){return{button:{margin:e.spacing.unit},header:{position:"fixed",zIndex:1},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}})($),K=Object(d.b)(function(e){return e},function(e){return{addNode:function(t,n){return e(function(e,t){return{type:"ADD_NODE",nodeType:e,nodeName:t}}(t,n))},demo1Nodes:function(){return e({type:"DEMO1_NODES"})},demo1Edges:function(){return e({type:"DEMO1_EDGES"})},setCreateEdgeMode:function(t){return e(f(t))},setCreateEdgeName:function(t){return e(function(e){return{type:"SET_CREATE_EDGE_NAME",name:e}}(t))}}})(q),Q=n(17),Z=function(e){function t(){return Object(y.a)(this,t),Object(_.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(O.a)(t,[{key:"mouseOver",value:function(){document.body.style.cursor="pointer"}},{key:"mouseOut",value:function(){document.body.style.cursor="default"}},{key:"render",value:function(){var e=this.props.fontSize;return this.props.name.length>25&&(e=15),a.a.createElement(Q.Group,{x:this.props.group_x,y:this.props.group_y,draggable:!0,onDragMove:this.props.dragMove,onClick:this.props.createEdge,onMouseEnter:this.mouseOver,onMouseLeave:this.mouseOut},a.a.createElement(Q.Rect,{x:this.props.node_x,y:this.props.node_y,width:this.props.width,height:this.props.height,cornerRadius:this.props.cornerRadius,fill:this.props.fill}),a.a.createElement(Q.Text,{x:this.props.name_x,y:this.props.name_y,width:160,height:70,align:"center",verticalAlign:"middle",fill:this.props.name_fill,fontSize:e,text:this.props.name}))}}]),t}(o.Component),ee=function(e){function t(){return Object(y.a)(this,t),Object(_.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=0;e=this.props.points[1]<this.props.points[3]?-25:5;var t=Object(u.a)(this.props.points);return a.a.createElement(Q.Group,null,a.a.createElement(Q.Arrow,{points:t,stroke:this.props.stroke,strokeWidth:this.props.strokeWidth,tension:0}),a.a.createElement(Q.Text,{x:(3*this.props.points[0]+2*this.props.points[2])/5,y:(3*this.props.points[1]+2*this.props.points[3])/5+e,fontSize:this.props.fontSize,text:this.props.name}))}}]),t}(o.Component),te=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(_.a)(this,Object(N.a)(t).call(this,e))).dragMove=n.dragMove.bind(Object(b.a)(Object(b.a)(n))),n.createEdge=n.createEdge.bind(Object(b.a)(Object(b.a)(n))),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(Object(b.a)(n))),n.onStageMouseClick=n.onStageMouseClick.bind(Object(b.a)(Object(b.a)(n))),n}return Object(v.a)(t,e),Object(O.a)(t,[{key:"nodeCenterPosition",value:function(e){return{x:Math.floor(e.group_x+e.width/2),y:Math.floor(e.group_y+e.height/2)}}},{key:"nodeLeftPosition",value:function(e){return{x:e.group_x,y:Math.floor(e.group_y+e.height/2)}}},{key:"createEdge",value:function(e){var t=e;if("default"!==this.props.createEdgeMode)if(-1===this.props.currentEdgeIndex){var n=this.props.dialogueNodes[t],o=this.nodeCenterPosition(n),a=[o.x,o.y];this.props.setCurrentEdgeIndex(this.props.dialogueEdges.length),this.props.addOutputEdgeToNode(t,this.props.dialogueEdges.length);var r=this.props.createEdgeMode;this.props.addEdge(a,r,this.props.createEdgeName),this.props.setEdgeInNode(this.props.currentEdgeIndex,t)}else{n=this.props.dialogueNodes[t];var i=this.nodeLeftPosition(n);a=[i.x,i.y];this.props.changeEdgeEndPoints(this.props.currentEdgeIndex,a),this.props.addInputEdgeToNode(t,this.props.currentEdgeIndex),this.props.setEdgeOutNode(this.props.currentEdgeIndex,t),this.props.setCurrentEdgeIndex(-1),this.props.setCreateEdgeMode("default")}}},{key:"dragMove",value:function(e,t){var n=this,o=t.currentTarget.getPosition(),a=[o.x,o.y],r=this.props.dialogueNodes[e];this.props.changeNodePosition(e,o),r.inEdges.forEach(function(e){var t=n.nodeLeftPosition(r);a=[t.x,t.y],n.props.changeEdgeEndPoints(e,a)}),r.outEdges.forEach(function(e){var t=n.nodeCenterPosition(r);a=[t.x,t.y],n.props.changeEdgeStartPoints(e,a)})}},{key:"onMouseMove",value:function(e){if("default"!==this.props.createEdgeMode&&-1!==this.props.currentEdgeIndex){var t=[e.evt.offsetX,e.evt.offsetY];this.props.changeEdgeEndPoints(this.props.currentEdgeIndex,t)}}},{key:"onStageMouseClick",value:function(e){if("default"!==this.props.createEdgeMode&&-1!==this.props.currentEdgeIndex){var t=[e.evt.offsetX,e.evt.offsetY];this.props.addEdgePoints(this.props.currentEdgeIndex,t)}}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(Q.Stage,{width:4*window.innerWidth,height:4*window.innerHeight,onMouseMove:this.onMouseMove,onClick:this.onStageMouseClick},a.a.createElement(Q.Layer,null,this.props.dialogueEdges.map(function(e,t){return a.a.createElement(ee,Object.assign({key:1e3+t},e))}),this.props.dialogueNodes.map(function(t,n){return a.a.createElement(Z,Object.assign({key:n},t,{dragMove:function(t){return e.dragMove(n,t)},createEdge:function(t){return e.createEdge(n)}}))}))))}}]),t}(o.Component),ne=Object(d.b)(function(e){return e},function(e){return{changeNodePosition:function(t,n){return e(function(e,t){return{type:"CHANGE_NODE_POSITION",index:e,position:t}}(t,n))},addOutputEdgeToNode:function(t,n){return e(function(e,t){return{type:"ADD_OUTPUT_EDGE_TO_NODE",nodeIndex:e,edgeIndex:t}}(t,n))},addInputEdgeToNode:function(t,n){return e(function(e,t){return{type:"ADD_INPUT_EDGE_TO_NODE",nodeIndex:e,edgeIndex:t}}(t,n))},addEdge:function(t,n,o){return e(function(e,t,n){return{type:"ADD_EDGE",points:e,edgeType:t,edgeName:n}}(t,n,o))},setEdgeInNode:function(t,n){return e(function(e,t){return{type:"SET_EDGE_IN_NODE",edgeIndex:e,nodeIndex:t}}(t,n))},setEdgeOutNode:function(t,n){return e(function(e,t){return{type:"SET_EDGE_OUT_NODE",edgeIndex:e,nodeIndex:t}}(t,n))},addEdgePoints:function(t,n){return e(function(e,t){return{type:"ADD_EDGE_POINTS",index:e,points:t}}(t,n))},changeEdgeStartPoints:function(t,n){return e(function(e,t){return{type:"CHANGE_EDGE_START_POINTS",index:e,points:t}}(t,n))},changeEdgeEndPoints:function(t,n){return e(function(e,t){return{type:"CHANGE_EDGE_END_POINTS",index:e,points:t}}(t,n))},setCurrentEdgeIndex:function(t){return e(function(e){return{type:"SET_CURRENT_EDGE_INDEX",index:e}}(t))},setCreateEdgeMode:function(t){return e(f(t))}}})(te),oe=function(){return a.a.createElement("div",null,a.a.createElement(K,null),a.a.createElement(ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=Object(s.c)(g);i.a.render(a.a.createElement(d.a,{store:ae},a.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[102,2,1]]]);
//# sourceMappingURL=main.f287162b.chunk.js.map